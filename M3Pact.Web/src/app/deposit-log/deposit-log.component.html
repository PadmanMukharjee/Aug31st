
<app-loader></app-loader>
<script type="text/javascript">
    $('.btn-toggle').click(function () {
        $(this).find('.btn').toggleClass('active');

        if ($(this).find('.btn-primary').size() > 0) {
            $(this).find('.btn').toggleClass('btn-primary');
        }
        if ($(this).find('.btn-danger').size() > 0) {
            $(this).find('.btn').toggleClass('btn-danger');
        }
        if ($(this).find('.btn-success').size() > 0) {
            $(this).find('.btn').toggleClass('btn-success');
        }
        if ($(this).find('.btn-info').size() > 0) {
            $(this).find('.btn').toggleClass('btn-info');
        }

        $(this).find('.btn').toggleClass('btn-default');

    });

    $('form').submit(function () {
        alert($(this["options"]).val());
        return false;
    });
</script>
<p-growl [(value)]="saveMessages"></p-growl>
<div class="right_col" role="main">
    <div class="page-title">
        <div class="title_left">
            <span *ngIf="editActions.includes('ViewAddDepositSection') && isAddDepositVisible" class="fa fa-2x fa-chevron-circle-left" title="Click to hide Add Deposit section" (click)="hideOrShowAddDeposit()"></span>
            <span *ngIf="editActions.includes('ViewAddDepositSection') && !isAddDepositVisible" class="fa fa-2x fa-chevron-circle-right" title="Click to show Add Deposit section" (click)="hideOrShowAddDeposit()"></span>
            <h3 style="display:inline">{{labels.DEPOSIT_LOG_TITLE}} {{clientCode}} - {{clientName}}</h3>
        </div>
        <div class="title_right">
            &nbsp;
        </div>
    </div>
    <div class="clearfix"></div>
    <div class="row">
        <div id="addDepositSection" [@enterAnimation] class="col-xs-12 col-sm-12 col-md-5 col-lg-3 " *ngIf="editActions.includes('ViewAddDepositSection')&&isAddDepositVisible">
            <div class="x_panel light_shadow" id="addDepositSectionInner">
                <div class="x_title">
                    <h4>{{labels.ADD_DEPOSIT}}</h4>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content">
                    <form class="form-horizontal form-label-left input_mask" #depositLog="ngForm" (ngSubmit)="saveDepositLog(depositLog)">
                        <div class="row">
                            <div>
                                <div class="form-group">
                                    <label class="control-label col-lg-2 col-md-3 col-sm-3 col-xs-3">{{labels.DATE}}</label>
                                    <div class="col-lg-6 col-md-6 col-sm-4 col-xs-7">
                                        <div id="myDatepicker" class="input-group date">
                                            <p-calendar [(ngModel)]="depositDate" name="date" [maxDate]="today" [disabledDates]="holidayDates" (onSelect)="OnDateChange($event)" (click)="highlightDates()" [showIcon]="true" required #datectrl="ngModel">
                                                <ng-template pTemplate="date" let-date>
                                                    <span [ngClass]="isDepositEnteredForDate(date) ? 'deposit-exist' : ''">{{date.day}}</span>
                                                </ng-template>
                                            </p-calendar>
                                        </div>
                                    </div>
                                    <div class="col-xs-2 col-lg-1">
                                        <div class="range rect_top_corner" (click)="incrementDate()">
                                            <i class="fa fa-sort-asc" aria-hidden="true"></i>
                                        </div>
                                        <div class="range p_relative rect_bottom_corner" (click)="decrementDate()">
                                            <i class="fa fa-sort-desc" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12 ml-20">
                                        <div *ngIf="isCurrentDateNotValid" class="font_color_red">{{labels.NO_DEPOSIT_DUE_TO_HOLIDAY}}</div>
                                    </div>
                                </div>
                                <hr />
                                <div class="form-group">
                                    <label class="control-label col-lg-5 col-md-6 col-sm-3 col-xs-12"><b>Expected Total</b></label>
                                    <div class="col-lg-7 col-md-6 col-sm-9 col-xs-12">
                                        <input type="text"
                                               [(ngModel)]="expectedTotalCurrencyFormat"
                                               class="form-control text-right"
                                               name=total
                                               (focus)="onfocus($event)"
                                               (blur)="onBlur($event)"
                                               (keyup)="onkeyup($event)"
                                               placeholder="0"
                                               [disabled]="depositeLogClientData.isMonthClosed || isCurrentDateNotValid"
                                               #deplogtotal="ngModel">
                                        <label *ngIf="enteredExpectedAmountNotValid" class="pull-right font_color_red">{{labels.DEPOSIT_ERROR}}</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-5 col-md-6 col-sm-3 col-xs-12"><b>Difference</b></label>
                                    <div class="col-lg-7 col-md-6 col-sm-9 col-xs-12">
                                        <label class="font_color_red"><b>{{Difference}}</b></label>
                                    </div>
                                </div>
                                <hr />
                                <div *ngFor="let payer of depositeLogClientData.payers;let i=index">
                                    <div class="form-group">
                                        <label class="control-label col-lg-5 col-md-6 col-sm-3 col-xs-12">{{payer.payerName}}</label>
                                        <div class="col-lg-7 col-md-6 col-sm-9 col-xs-12">
                                            <input type="text"
                                                   [(ngModel)]="payer.amountCurrencyFormat"
                                                   class="form-control text-right"
                                                   name="{{payer.payerName}}"
                                                   (focus)="onfocus($event)"
                                                   (blur)="onBlur($event,i)"
                                                   (keyup)="onkeyup($event,i)"
                                                   placeholder="0"
                                                   [disabled]="depositeLogClientData.isMonthClosed || isCurrentDateNotValid"
                                                   #deplogpayer="ngModel">
                                            <label *ngIf="enteredDepositNotValid[i]" class="pull-right font_color_red">{{labels.DEPOSIT_ERROR}}</label>
                                        </div>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-5 col-md-3 col-sm-3 col-xs-12"><b>{{labels.TOTAL}}</b></label>
                                    <div class="col-lg-7 col-md-9 col-sm-9 col-xs-12">
                                        <label class="control-label"><b>{{ depositeLogClientData.total | currency }}</b></label>
                                    </div>
                                </div>
                                <p-messages [(value)]="messages"></p-messages>
                            </div>
                            <hr />
                        </div>
                        <div class="form-group">
                            <div class="col-xs-12">
                                <button type="button" [disabled]="depositeLogClientData.isMonthClosed || isCurrentDateNotValid" class="btn btn-dark btn-sm btn-round deposit_right" (click)="reset(depositLog)">{{labels.RESET}}</button>
                                <button type="submit" [disabled]="depositeLogClientData.isMonthClosed || isCurrentDateNotValid" class="btn btn-dark btn-sm btn-round deposit_right">{{labels.SAVE}}</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div id="depositLogGraphSection" [ngClass]="{'col-xs-12 col-sm-12 col-md-12 col-lg-12 increase-width' : editActions.includes('ViewAddDepositSection') == false && !isAddDepositVisible , 'col-xs-12 col-sm-12 col-md-7 col-lg-9 increase-width' : editActions.includes('ViewAddDepositSection') == true && isAddDepositVisible }">
            <div class="animated flipInY">
                <div class="tile-stats">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-3 ">
                            <div class="top_section_leftarea" *ngIf="!showMonthDepositsOfAYear">
                                <div class="progressTxt" *ngIf="!errorMessageProgressBar"><strong>Deposits Entered: {{curr_business_days}} of {{tot_business_days}} days</strong></div>
                                <div class="progressTxt" *ngIf="errorMessageProgressBar"><strong> {{ errorLabels.NODATA }} </strong></div>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-warning progress-bar-striped progressIndicator" data-transitiongoal="65" aria-valuenow="65" [style.width]="getProgress()"> </div>
                                </div>
                            </div>

                            <!--<div style="color:black"><strong>{{curr_business_days}} of {{tot_business_days}} days</strong></div>-->
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-9 text-right">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 pt-8">
                                <div *ngIf="!showMonthDepositsOfAYear" class="form-group">
                                    <label class="control-label col-lg-3 col-md-3 col-sm-6 col-xs-12">Period</label>
                                    <input name="monthPicker" class="col-lg-4 col-md-3 col-sm-6 col-xs-12 monthPicker flex_responsive date_picker" [(ngModel)]="selectedMonthYear" [dpDayPicker]="datePickerConfig" mode="month" (ngModelChange)="OnMonthChange()" [theme]="theme" #dateDirectivePicker="dpDayPicker" disabled>
                                    <span class="monthPickerIcon" (click)="open()"><i class="fa fa-calendar allignIcon" aria-hidden="true"></i></span>
                                </div>
                            </div>
                            <div id="icons_deposit_log" class="col-xs-12 col-sm-12 col-md-12 col-lg-6">
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <span class="fa-stack fa-lg" data-toggle="tooltip" title="{{labels.VIEW_DEPOSITS}}" (click)="showDepositLogGraphView()" attr.data-tooltip="{{labels.GRAPH_VIEW}}">
                                            <i class="fa fa-circle fa-stack-2x"></i>
                                            <i class="fa fa-bar-chart fa-stack-1x fa-inverse"></i>
                                        </span>
                                        <span class="fa-stack fa-lg" (click)="showDepositLogTableView()" title="{{labels.VIEW_DEPOSITS}}" attr.data-tooltip="{{labels.GRID_VIEW}}">
                                            <i class="fa fa-circle fa-stack-2x"></i>
                                            <i class="fa fa-th fa-stack-1x fa-inverse"></i>
                                        </span>
                                        <span class="fa-stack fa-lg" title="{{labels.CLOSE_MONTH}}" attr.data-tooltip="{{labels.CLOSE_MONTH}}" (click)="showMonthWiseDepositsInAYear()">
                                            <i class="fa fa-circle fa-stack-2x"></i>
                                            <i class="fa fa-remove fa-stack-1x fa-inverse f-22"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="showDepositLogGraph">
                <div class="x_panel">
                    <div class="x_title">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6"> <h4>Business Details</h4></div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 lbl_procash">
                            <label class="control-label"> Projected Cash : Last Entered</label>
                            <input type="number"
                                   class="w-50 shadow-n"
                                   [ngModel]="numberOfLastWorkingDays" (ngModelChange)="numberOfLastWorkingDays=$event"
                                   name="numberOfLastWorkingDays"
                                   min="1"
                                   (change)="updateProjectedCash()" *ngIf="showSimpleBusinessDays"/>
                            <label class="control-label" *ngIf="showSimpleBusinessDays">Business Days</label>
                            <input type="number"
                                   [ngModel]="numberOfWeeks" (ngModelChange)="numberOfWeeks=$event"
                                   class="w-50 shadow-n"
                                   name="numberOfWeeks"
                                   min="1"
                                   (change)="updateProjectedCash()" *ngIf="!showSimpleBusinessDays" style="box-shadow:none !important"/>
                            <label class="control-label" *ngIf="!showSimpleBusinessDays">Weeks</label>
                            <i class="fa fa-floppy-o fa-lg save_Button_Entered_Values" aria-hidden="true" (click)="saveLastEnteredBusinessDaysOrWeeks()" *ngIf="editActions.includes('SaveLastEnteredBusinessDaysOrWeeks')"></i>
                        </div>
                        <div class="clearfix"></div>
                        <div class="x_content charts_depositlog">
                            <div class="row">
                                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                    <div class="well well-sm">
                                        <h5>{{labels.ACTUAL_VS_TARGET}} | MTD</h5>
                                        <div *ngIf="!errorMessageMTD">
                                            <div class="col-xs-12">
                                                <p-chart type="doughnut" [data]="MTDdata"></p-chart>
                                            </div>
                                            <div class="col-xs-12 chart_stats margin-10">
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ MTDPercentMet }} %<br /></span>{{labels.MET}}</div>
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ depositLogMTDValue | currency }}</span><br />{{labels.PROGRESS}}</div>
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ depositLogMTDMaxValue | currency }}</span><br />{{labels.TARGET}}</div>
                                            </div>
                                            <div class="row">
                                            </div>
                                        </div>
                                        <div *ngIf="errorMessageMTD">
                                            <h4> {{ errorLabels.NODATA }} </h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12" *ngIf="showSimpleBusinessDays">
                                    <div class="well well-sm btn_days_weeks">
                                        <h5 class="padding-b-8">
                                            <span class="btn-group btn-toggle f_right">
                                                <button class="btn btn-sm btn-primary active" (click)="getDataBasedOnDays()">Days</button>
                                                <button class="btn btn-sm btn-default" (click)="getDataBasedOnWeeks()">Weeks</button>
                                            </span>
                                            <label class="projection-header">{{labels.PROJECTED_VS_TARGET}} | Monthly</label>
                                        </h5>
                                        <div *ngIf="!errorMessageMonthly">
                                            <div class="col-xs-12">
                                                <p-chart type="doughnut" [data]="projectedCashData"></p-chart>
                                            </div>
                                            <div class="col-xs-12 chart_stats margin-10">
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ projectedCashAmountPercentMet }} %<br /></span>{{ labels.MET }}</div>
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ projectedToCollectAmount | currency }} <br /></span>{{ labels.PROJECTED_TO_COLLECT }}</div>
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ projectedCashAmount | currency }}</span><br />{{ labels.PROJECTED_CASH }}</div>
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ projectedCashAmountMaxValue | currency }}</span><br />{{ labels.TARGET }}</div>
                                            </div>
                                            <div class="row">
                                            </div>
                                        </div>
                                        <div *ngIf="errorMessageMonthly">
                                            <h4> {{ errorLabels.NODATA }} </h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12" *ngIf="!showSimpleBusinessDays">
                                    <div class="well well-sm btn_days_weeks">
                                        <h5 class="padding-b-8">
                                            <span class="btn-group btn-toggle f_right">
                                                <button class="btn btn-sm btn-default" (click)="getDataBasedOnDays()">Days</button>
                                                <button class="btn btn-sm btn-primary active" (click)="getDataBasedOnWeeks()">Weeks</button>
                                            </span>
                                            <label class="projection-header">{{labels.PROJECTED_VS_TARGET}} | Monthly</label>
                                        </h5>
                                        <div *ngIf="!errorMessageMonthly">
                                            <div class="col-xs-12">
                                                <p-chart type="doughnut" [data]="projectedCashData"></p-chart>
                                            </div>
                                            <div class="col-xs-12 chart_stats margin-10">
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ projectedCashAmountPercentMet }} %<br /></span>{{ labels.MET }}</div>
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ projectedToCollectAmount | currency }} <br /></span>{{ labels.PROJECTED_TO_COLLECT }}</div>
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ projectedCashAmount | currency }}</span><br />{{ labels.PROJECTED_CASH }}</div>
                                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"><span>{{ projectedCashAmountMaxValue | currency }}</span><br />{{ labels.TARGET }}</div>
                                            </div>
                                            <div class="row">
                                            </div>
                                        </div>
                                        <div *ngIf="errorMessageMonthly">
                                            <h4> {{ errorLabels.NODATA }} </h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- bar chart -->
                        <div>
                            <div class="x_panel light_shadow">
                                <div class="x_title">
                                    <h4>{{labels.TOP_PAYERS}}</h4><br />
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content ngx-graph_responsive">
                                    <div id="graph_bar" class="" *ngIf="!errorMessageTopPayers">
                                        <!--<p class="text-center">
                                            <p-chart type="bar" [data]="dataset"></p-chart>
                                        </p>-->
                                        <ngx-charts-bar-vertical [view]="barChartProperties.view"
                                                                 [scheme]="barChartProperties.colorScheme"
                                                                 [results]="barChartProperties.data"
                                                                 [gradient]="barChartProperties.gradient"
                                                                 [xAxis]="barChartProperties.showXAxis"
                                                                 [yAxis]="barChartProperties.showYAxis"
                                                                 [legend]="barChartProperties.showLegend"
                                                                 [barPadding]="barChartProperties.barPadding"
                                                                 [showXAxisLabel]="barChartProperties.showXAxisLabel"
                                                                 [showYAxisLabel]="barChartProperties.showYAxisLabel"
                                                                 [xAxisLabel]="barChartProperties.xAxisLabel"
                                                                 [yAxisLabel]="barChartProperties.yAxisLabel"
                                                                 [showGridLines]="barChartProperties.showGridLines"
                                                                 (select)="onSelect($event)">
                                        </ngx-charts-bar-vertical>
                                    </div>

                                    <div *ngIf="errorMessageTopPayers">
                                        <h4> {{ errorLabels.NODATA }} </h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="showProjectedCashVsDays">
                            <div class="x_panel light_shadow">
                                <div class="x_title">
                                    <h4>{{labels.PROJECTEDCASH}}</h4><br />
                                    <div class="clearfix"></div>
                                </div>

                                <div *ngIf="!errorMessageCashProjectionPreviousDays">
                                    <div>

                                        <p class="slider-value">{{ minRange }} - {{ lastWorkingDays }} days </p>
                                        <p class="slidecontainer">
                                            <span class="right">{{ maxWorkingDays }} days </span>
                                            <span>
                                                <input type="range" [min]=minWorkingDays [max]=maxWorkingDays class="slider" id="myRange"
                                                       [(ngModel)]="lastWorkingDays"
                                                       name="lastWorkingDays"
                                                       (change)="updateLastWorkingDaysProjectedCash()" [disabled]="isSliderDisabled" />
                                            </span>
                                            <span class="right">
                                                {{ minRangeBusinessDays }} day
                                            </span>
                                        </p>
                                    </div>

                                    <div class="x_content">


                                        <combo-chart-component class="chart-container"
                                                               [view]="view"
                                                               [scheme]="comboBarScheme"
                                                               [colorSchemeLine]="lineChartScheme"
                                                               [results]="barChart"
                                                               [animations]="animations"
                                                               [lineChart]="lineChartSeries"
                                                               [tooltipDisabled]="tooltipDisabled"
                                                               [yAxisTickFormatting]="yLeftTickFormat"
                                                               [yLeftAxisScaleFactor]="yLeftAxisScale"
                                                               [yRightAxisScaleFactor]="yRightAxisScale"
                                                               [yRightAxisTickFormatting]="yRightTickFormat"
                                                               [gradient]="gradient"
                                                               [xAxis]="showXAxis"
                                                               [yAxis]="showYAxis"
                                                               [legend]="showLegend"
                                                               [legendTitle]="legendTitle"
                                                               [showGridLines]="showGridLines"
                                                               [showXAxisLabel]="showXAxisLabel"
                                                               [showYAxisLabel]="showYAxisLabel"
                                                               [showRightYAxisLabel]="showRightYAxisLabel"
                                                               [xAxisLabel]="xAxisLabel"
                                                               [yAxisLabel]="yAxisLabel"
                                                               [yAxisLabelRight]="yAxisLabelRight"
                                                               [yScaleMaxValue]="yScaleMaxValue"
                                                               (select)="onSelect($event)">
                                        </combo-chart-component>
                                    </div>
                                </div>
                                <div class="x_content" *ngIf="errorMessageCashProjectionPreviousDays">
                                    <h4> {{ errorLabels.NODATA }} </h4>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
            <div *ngIf="showMonthDepositsOfAYear">
                <div class="x_panel">
                    <div class="x_title">
                        <div class="col-xs-12 col-sm-6 col-md-12 col-lg-6">
                            <h4>{{closeMonthTitle}}</h4>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 black-color">
                            <div class="form-group pull-right">
                                <label class="control-label col-lg-3 col-md-3 col-sm-6 col-xs-12"><strong>{{labels.YEAR}}</strong></label>
                                <input class="col-lg-4 col-md-3 col-sm-6 col-xs-12 monthPicker flex_responsive" [(ngModel)]="depositYear" type="text" id="yearPicker">
                                <span class="monthPickerIcon year-picker-icon" (click)="showYearPicker()"><i class="fa fa-calendar allignIcon" aria-hidden="true"></i></span>
                            </div>
                        </div>
                        <br />
                        <div class="clearfix"></div>
                    </div>
                    <div class="row">
                        <div *ngFor="let monthDeposit of monthDepositsDataOfAYear" class="col-lg-4 col-md-12 col-sm-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <label class="month_font"><b>{{monthDeposit.monthName}}</b></label>
                                    <button *ngIf="monthDeposit.isButtonVisible" type="submit" (click)="openOrCloseMonth(monthDeposit.monthID, monthDeposit.monthStatus)" class="btn btn-dark btn-sm btn-round" [disabled]="monthDeposit.isButtonDisabled">{{monthDeposit.elementText}}</button>
                                    <h5 *ngIf="!monthDeposit.isButtonVisible" class="pull-right {{monthDeposit.textColorClass}}"><b>{{monthDeposit.elementText}}</b></h5>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div>
                                            <div class="form-row">
                                                <div class="form-group col-md-12 6 col-xs-12 ">
                                                    <label class="col-lg-5 col-md-6 col-sm-6 col-xs-6 text-right"><b>{{labels.TARGET}}:</b></label>
                                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                        <label> {{monthDeposit.target | currency}}</label>
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-12 col-xs-12">
                                                    <label class="col-lg-5 col-md-6 col-sm-6 col-xs-6 text-right"><b>{{labels.ACTUAL_DEPOSITS}}:</b></label>
                                                    <div class="col-lg-7 col-md-6 col-sm-6 col-xs-6">
                                                        <label> {{monthDeposit.actualDeposit | currency}}</label>
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-12 col-xs-12">
                                                    <label class="col-lg-5 col-md-6 col-sm-6 col-xs-6 text-right"><b>{{labels.MET}}:</b></label>
                                                    <div class="col-lg-7 col-md-6 col-sm-6 col-xs-6">
                                                        <div *ngIf="monthDeposit.metPercent != null">
                                                            <label> {{monthDeposit.metPercent}}</label>
                                                            <span [ngClass]="monthDeposit.metPercentStatus != null ? monthDeposit.metPercentStatus == 'up' ? 'fa fa-caret-up green_met_percent' : 'fa fa-caret-down red_met_percent' : ''"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="showDepositLogGrid">
                <div class="x_panel">
                    <div class="x_title col-sm-12 col-xs-10 table_responsive_style">
                        <div *ngIf="!showDepositLogGraph">
                            <div class="row">
                                <button class="btn btn-dark btn-sm btn-round pull-right" title={{labels.EXPORT_DEPOSITS}} (click)="showDepositLogExport()"><i class="fa fa-file-excel-o pad-right-5"></i>{{labels.EXPORT}}</button>
                            </div>
                            <p-table [value]="depositLogDataAmount" [columns]="depositLogPayers" [totalRecords]="numberOfRows" selectionMode="single">
                                <ng-template pTemplate="header" let-columns>
                                    <tr>
                                        <th *ngFor="let col of columns" [pSortableColumn]="col" class="width-115">
                                            {{col}}
                                            <p-sortIcon [field]="col"></p-sortIcon>
                                        </th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-rowData let-columns="columns" let-index="rowIndex" let-totalRecords="numberOfRows">
                                    <tr>
                                        <td class="targetTableData" *ngFor="let col of columns">
                                            <label *ngIf="col == 'Deposit Date'" class="float-l"> <i *ngIf="!depositeLogClientData.isMonthClosed && editActions.includes('ViewAddDepositSection')" class="fa fa-pencil deposit_edit" (click)="onDepositEdit(rowData['Deposit Date'])"></i> </label><label *ngIf="col == 'Deposit Date'">{{ rowData[col] }}</label>
                                            <label *ngIf="col == 'TOTAL'" class="depositDataText"><b>{{rowData[col] | currency }} </b> </label>
                                            <label *ngIf="col != 'Deposit Date' && col != 'TOTAL' && !isNumber(rowData[col])"> {{rowData[col] | currency }}</label>
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="footer" let-rowData let-columns let-index="rowIndex" let-totalRecords="numberOfRows">
                                    <tr [ngClass]="{'depositLogFooter': lastRow['Deposit Date'] == 'TOTAL'}" class="depositLogFooter">
                                        <td class="targetTableData" *ngFor="let col of columns">
                                            <label *ngIf="col == 'Deposit Date'"><b>{{lastRow[col]}}</b></label>
                                            <label *ngIf="col == 'TOTAL'" class="depositDataText"><b>{{lastRow[col] | currency }}</b></label>
                                            <label *ngIf="col != 'Deposit Date' && col != 'TOTAL'"> <b>{{lastRow[col] | currency }}</b></label>
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="emptymessage" let-columns>
                                    <tr>
                                        <td [attr.colspan]="columns.length">
                                            {{ errorLabels.NODATA }}
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                </div>

            </div>
            <!-- /bar charts -->
            <!-- /page content -->
            <!-- footer content -->
            <div *ngIf="displayProjectionDaysMessage && showDepositLogGraph">
                <p-dialog header="Projection Days !" [(visible)]="displayProjectionDaysMessage" [responsive]="true" [modal]="true" [height]="170">
                    <div *ngIf="!showNodataMessage">
                        <label>
                            The deposit data for last {{ previousDays }} days
                            is not available.
                            Showing data for only {{ actualLastWorkingDays }} days.
                        </label>
                    </div>
                    <div *ngIf="showNodataMessage">
                        <label>
                            {{ labels.DEPOSIT_NODATA }}
                        </label>
                    </div>
                    <div class="right mt-15">
                        <button type="submit" class="btn btn-dark btn-sm btn-round" (click)="closedisplayProjectionDayMessage()">OK</button>
                    </div>
                </p-dialog>
            </div>
            <div *ngIf="displayProjectionWeeksMessage && showDepositLogGraph">
                <p-dialog header="Projection Weeks !" [(visible)]="displayProjectionWeeksMessage" [responsive]="true" [modal]="true" [height]="170">
                    <div *ngIf="!showNodataMessageWeekly">
                        <label>
                            The deposit data for last {{ tempNumberOfWeeks }} weeks
                            is not available.
                            Showing data for only {{ actualLastNumberOfWeeks }} weeks.
                        </label>
                    </div>
                    <div *ngIf="showNodataMessageWeekly">
                        <label>
                            {{ labels.DEPOSIT_NODATE_WEEK }}
                        </label>
                    </div>
                    <div class="right mt-15">
                        <button type="submit" class="btn btn-dark btn-sm btn-round" (click)="closedisplayProjectionWeekMessage()">OK</button>
                    </div>
                </p-dialog>
            </div>

            <div *ngIf="exportDepositLog" class="export-dialog">
                <p-dialog header="{{labels.EXPORT_DEPOSITS_LOGS}}" [(visible)]="exportDepositLog" [responsive]="true" [modal]="true" [width]="350">
                    <div class="form-group row">
                        <label for="year" class="col-sm-12 col-md-5 col-form-label"><b>{{labels.SELECT_YEAR}}:</b><span class="required">*</span></label>
                        <div class="col-sm-12 col-md-7">
                            <p-dropdown [options]="calendarYears" name="Speciality" placeholder="Select"
                                        [(ngModel)]="calendarYear" filter="true" autoWidth="false" required="true"></p-dropdown>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-12 col-md-5"><b>{{labels.SELECT_MONTHS}}</b><span class="required">*</span></label>
                        <div class="col-sm-12 col-md-7">
                            <p-multiSelect [disabled]="calendarYear==undefined" class="w-250" [options]="months" name="months" placeholder="Select" maxSelectedLabels="1" selectedItemsLabel="{{labels.EXPORT_FILTER_TEXT}}" [(ngModel)]="selectedMonths" autoWidth="false" required="true"></p-multiSelect>
                        </div>
                    </div>
                    <div class="ui-g-12 text-center mt-130">
                        <button *ngIf="selectedMonths!=null && selectedMonths!=undefined && selectedMonths.length > 0" class="btn btn-dark btn-round btn-sm pull-right" type="submit" (click)="export()">{{labels.EXPORT}}</button>
                    </div>
                </p-dialog>
            </div>
        </div>
    </div>
</div>
